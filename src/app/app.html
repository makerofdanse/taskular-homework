<div class="container">
    <h1>{{ title() }}</h1>

    <app-task-form (taskAdded)="addTask($event)"></app-task-form>

    <div class="filters">
        <button [class.active]="filter === 'all'" (click)="setFilter('all')">all</button>
        <button [class.active]="filter === 'active'" (click)="setFilter('active')">active</button>
        <button [class.active]="filter === 'completed'" (click)="setFilter('completed')">completed</button>
        @if (hasCompletedTasks()) {
            <button class="clear" (click)="clearCompleted()">clear done</button>
        }
    </div>

    <ul cdkDropList (cdkDropListDropped)="drop($event)">
        @for (task of filteredTasks; track task.id) {
            <li cdkDrag>
                <app-task-item
                    [task]="task"
                    (deleted)="deleteTask($event)"
                    (toggled)="toggleTask($event)"
                    (editStarted)="startEdit($event)"
                    (editSaved)="saveEdit($event.id, $event.text)"
                    (editCanceled)="cancelEdit($event)"
                >
                </app-task-item>
            </li>
        }
    </ul>
</div>
